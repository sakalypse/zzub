function _defineProperties(n,t){for(var e=0;e<t.length;e++){var l=t[e];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(n,l.key,l)}}function _createClass(n,t,e){return t&&_defineProperties(n.prototype,t),e&&_defineProperties(n,e),n}function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{DShy:function(n,t,e){"use strict";e.r(t);var l=e("8Y7J"),o=function n(){_classCallCheck(this,n)},r=e("pMnS"),a=e("MKJQ"),i=e("sZkV"),c=e("SVse"),u=e("mrSG"),s=e("IheW"),g=e("qXBG"),b=e("AytR"),p=e("VdwR"),d=e("qfBg"),m=e("B68i"),h=function(){function n(t,e,l,o,r,a,i,c,u,g){var p=this;_classCallCheck(this,n),this.authService=t,this.gameService=e,this.userService=l,this.http=o,this.router=a,this.activatedRoute=i,this.alertController=c,this.toastController=u,this.socket=g,this.API_URL=b.a.API_URL_DEV,this.http=new s.c(r),i.params.subscribe((function(n){p.init()}))}return _createClass(n,[{key:"ngOnInit",value:function(){}},{key:"init",value:function(){return u.__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function n(){var t=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.authService.getLoggedUser().userId;case 2:return this.userId=n.sent,this.roomCode=this.activatedRoute.snapshot.paramMap.get("code"),n.next=6,this.gameService.getGameByCode(this.roomCode);case 6:if(this.room=n.sent,this.players=this.room.players,this.owner=this.room.owner.userId==this.userId,n.t0=this.room.players.some((function(n){return n.userId==t.userId})),n.t0){n.next=18;break}return n.next=13,this.gameService.addUserToGame(this.room.gameId,this.userId);case 13:return n.t1=this.players,n.next=16,this.userService.getSafeInfoUser(this.userId);case 16:n.t2=n.sent,n.t1.push.call(n.t1,n.t2);case 18:this.socket.emit("joinLobby",this.authService.getLoggedUser().userId,this.roomCode),this.socket.fromEvent("joinLobby").subscribe((function(n){return u.__awaiter(t,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.userService.getSafeInfoUser(n);case 2:e=t.sent,this.players.some((function(n){return n.userId==e.userId}))||this.players.push(e);case 4:case"end":return t.stop()}}),t,this)})))})),this.socket.fromEvent("quitGame").subscribe((function(n){return u.__awaiter(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.players=this.players.filter((function(t){return t.userId!==n}));case 1:case"end":return t.stop()}}),t,this)})))})),this.socket.fromEvent("killGame").subscribe((function(n){return u.__awaiter(t,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=this.authService.getLoggedUser().role==m.a.guest,!n.t0){n.next=5;break}return n.next=4,this.userService.deleteGuest(this.authService.getLoggedUser().userId);case 4:this.authService.clearStorage();case 5:this.router.navigate(["/homepage/"]);case 6:case"end":return n.stop()}}),n,this)})))})),this.socket.fromEvent("startGame").subscribe((function(n){return u.__awaiter(t,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.router.navigateByUrl("/game/"+this.roomCode);case 1:case"end":return n.stop()}}),n,this)})))}));case 23:case"end":return n.stop()}}),n,this)})))}},{key:"exitRoom",value:function(){return u.__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.gameService.removeUserToGame(this.room.gameId,this.userId);case 2:if(n.t0=this.authService.getLoggedUser().role==m.a.guest,!n.t0){n.next=7;break}return n.next=6,this.userService.deleteGuest(this.authService.getLoggedUser().userId);case 6:this.authService.clearStorage();case 7:this.socket.emit("quitGame",this.userId,this.roomCode),this.router.navigate(["/homepage/"]);case 9:case"end":return n.stop()}}),n,this)})))}},{key:"deleteRoom",value:function(){return u.__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.gameService.deleteGame(this.room.gameId);case 2:this.socket.emit("killGame",this.roomCode),this.router.navigate(["/homepage/"]);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"startRoom",value:function(){return u.__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.gameService.startGame(this.room.gameId);case 2:this.socket.emit("startGame",this.roomCode),this.router.navigateByUrl("/game/"+this.roomCode);case 4:case"end":return n.stop()}}),n,this)})))}}]),n}(),f=e("iInd"),_=e("RH9n"),y=l.nb({encapsulation:0,styles:[["ion-content[_ngcontent-%COMP%]{--background:#ebebed}.lobby[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:calc(100% - 126px)}.lobby[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{display:flex;background-color:#fff;box-shadow:var(--material-shadow-2);color:var(--custom-color-secondary);width:100%}.lobby[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .code-container[_ngcontent-%COMP%]{margin:auto;text-align:center;padding:15px;width:100%}.lobby[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .code-container[_ngcontent-%COMP%]   .sup-code[_ngcontent-%COMP%]{font-size:18px;text-align:center;font-weight:600}.lobby[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .code-container[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]{font-size:52px;font-weight:700;line-height:1.1}.lobby[_ngcontent-%COMP%]   .main-lobby[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative}.lobby[_ngcontent-%COMP%]   .main-lobby[_ngcontent-%COMP%]   .players-section[_ngcontent-%COMP%]   .players-title[_ngcontent-%COMP%]{background-color:#fff;color:var(--custom-color-secondary);box-shadow:var(--material-shadow-2);margin:25px 20px 15px;padding:10px;text-align:center;font-weight:700}.lobby[_ngcontent-%COMP%]   .main-lobby[_ngcontent-%COMP%]   .players-section[_ngcontent-%COMP%]   .players[_ngcontent-%COMP%]{display:flex;padding:0 20px}@media screen and (min-width:768px){.lobby[_ngcontent-%COMP%]{overflow:hidden}.lobby[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{max-width:500px;margin:20px auto}.lobby[_ngcontent-%COMP%]   .main-lobby[_ngcontent-%COMP%]{flex-direction:row;justify-content:center}.lobby[_ngcontent-%COMP%]   .main-lobby[_ngcontent-%COMP%]   .players-section[_ngcontent-%COMP%]{width:45%;max-width:500px}.lobby[_ngcontent-%COMP%]   .main-lobby[_ngcontent-%COMP%]   .players-section[_ngcontent-%COMP%]   .players-simplebar[_ngcontent-%COMP%]{max-height:calc(100vh - 445px)}.lobby[_ngcontent-%COMP%]   .main-lobby[_ngcontent-%COMP%]   .players-section[_ngcontent-%COMP%]   .players[_ngcontent-%COMP%]{flex-direction:column;padding:0;max-height:calc(100vh - 445px)}}.lobby[_ngcontent-%COMP%]   .main-lobby[_ngcontent-%COMP%]   .players-section[_ngcontent-%COMP%]   .players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:20px 20px 0}.lobby[_ngcontent-%COMP%]   .main-lobby[_ngcontent-%COMP%]   .players-section[_ngcontent-%COMP%]   .players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]   .player-img[_ngcontent-%COMP%]{width:75px;height:75px;border-radius:50%;margin:auto;overflow:hidden;background:#dadada;display:flex}.lobby[_ngcontent-%COMP%]   .main-lobby[_ngcontent-%COMP%]   .players-section[_ngcontent-%COMP%]   .players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]   .player-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{vertical-align:middle;margin:auto}.lobby[_ngcontent-%COMP%]   .main-lobby[_ngcontent-%COMP%]   .players-section[_ngcontent-%COMP%]   .players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]   .player-name[_ngcontent-%COMP%]{text-align:center;padding:15px 10px;text-transform:uppercase;color:var(--custom-color-secondary);font-weight:700}.lobby[_ngcontent-%COMP%]   .main-lobby[_ngcontent-%COMP%]   .packs-section[_ngcontent-%COMP%]   .packs-title[_ngcontent-%COMP%]{background-color:#fff;color:var(--custom-color-secondary);box-shadow:var(--material-shadow-2);margin:25px 20px 15px;padding:10px;text-align:center;font-weight:700}@media screen and (min-width:768px){.lobby[_ngcontent-%COMP%]   .main-lobby[_ngcontent-%COMP%]   .players-section[_ngcontent-%COMP%]   .players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]{flex-direction:row;background:#fff;margin:5px 20px;padding:15px 20px}.lobby[_ngcontent-%COMP%]   .main-lobby[_ngcontent-%COMP%]   .players-section[_ngcontent-%COMP%]   .players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]   .player-img[_ngcontent-%COMP%]{margin:auto 0}.lobby[_ngcontent-%COMP%]   .main-lobby[_ngcontent-%COMP%]   .players-section[_ngcontent-%COMP%]   .players[_ngcontent-%COMP%]   .player[_ngcontent-%COMP%]   .player-name[_ngcontent-%COMP%]{margin:auto auto auto 10px;font-size:20px}.lobby[_ngcontent-%COMP%]   .main-lobby[_ngcontent-%COMP%]   .packs-section[_ngcontent-%COMP%]{width:45%;max-width:500px}.lobby[_ngcontent-%COMP%]   .main-lobby[_ngcontent-%COMP%]   .packs-section[_ngcontent-%COMP%]   .packs-simplebar[_ngcontent-%COMP%]{max-height:calc(100vh - 445px)}}.lobby[_ngcontent-%COMP%]   .main-lobby[_ngcontent-%COMP%]   .packs-section[_ngcontent-%COMP%]   .packs[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:156px}.lobby[_ngcontent-%COMP%]   .main-lobby[_ngcontent-%COMP%]   .packs-section[_ngcontent-%COMP%]   .packs[_ngcontent-%COMP%]   .pack[_ngcontent-%COMP%]{background-color:#fff;color:var(--custom-color-secondary-light);margin:5px 20px;padding:10px;text-align:center;display:flex}@media screen and (min-width:768px){.lobby[_ngcontent-%COMP%]   .main-lobby[_ngcontent-%COMP%]   .packs-section[_ngcontent-%COMP%]   .packs[_ngcontent-%COMP%]{max-height:calc(100vh - 445px);margin-bottom:0}.lobby[_ngcontent-%COMP%]   .main-lobby[_ngcontent-%COMP%]   .packs-section[_ngcontent-%COMP%]   .packs[_ngcontent-%COMP%]   .pack[_ngcontent-%COMP%]{min-height:47.5px}}.lobby[_ngcontent-%COMP%]   .main-lobby[_ngcontent-%COMP%]   .packs-section[_ngcontent-%COMP%]   .packs[_ngcontent-%COMP%]   .pack[_ngcontent-%COMP%]   .pack-name[_ngcontent-%COMP%]{margin:auto}.lobby[_ngcontent-%COMP%]   .toolbar-section[_ngcontent-%COMP%]{bottom:0;width:100%;height:auto;background-color:#fff;position:fixed;display:flex;flex-direction:column;padding:20px 35px;box-shadow:var(--material-shadow-2)}.lobby[_ngcontent-%COMP%]   .toolbar-section[_ngcontent-%COMP%]   .primary-button[_ngcontent-%COMP%]{margin:0 auto 10px;background-color:var(--custom-color-secondary);color:#fff;font-weight:700;text-transform:uppercase;padding:5px;width:100%;max-width:400px;text-align:center;font-size:24px;box-shadow:var(--material-shadow-3);cursor:pointer;transition:.4s ease}.lobby[_ngcontent-%COMP%]   .toolbar-section[_ngcontent-%COMP%]   .primary-button[_ngcontent-%COMP%]:hover{background-color:var(--custom-color-secondary-light)}.lobby[_ngcontent-%COMP%]   .toolbar-section[_ngcontent-%COMP%]   .secondary-button[_ngcontent-%COMP%]{margin:auto;color:var(--ion-color-danger-shade);font-weight:700;text-decoration:underline;padding:5px;text-align:center;font-size:18px;cursor:pointer}"]],data:{}});function C(n){return l.Ib(0,[(n()(),l.pb(0,0,null,null,4,"div",[["class","player"]],null,null,null,null,null)),(n()(),l.pb(1,0,null,null,1,"div",[["class","player-img"]],null,null,null,null,null)),(n()(),l.pb(2,0,null,null,0,"img",[["alt","avatar"],["src","../assets/Images/avatars/dinosaur.png"]],null,null,null,null,null)),(n()(),l.pb(3,0,null,null,1,"div",[["class","player-name"]],null,null,null,null,null)),(n()(),l.Hb(4,null,["",""]))],null,(function(n,t){n(t,4,0,t.context.$implicit.username)}))}function M(n){return l.Ib(0,[(n()(),l.pb(0,0,null,null,2,"div",[["class","pack"]],null,null,null,null,null)),(n()(),l.pb(1,0,null,null,1,"div",[["class","pack-name"]],null,null,null,null,null)),(n()(),l.Hb(2,null,[" "," "]))],null,(function(n,t){n(t,2,0,t.context.$implicit.name)}))}function P(n){return l.Ib(0,[(n()(),l.pb(0,0,null,null,1,"div",[["class","primary-button"]],null,[[null,"click"]],(function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.startRoom()&&l),l}),null,null)),(n()(),l.Hb(-1,null,["Start quiz"]))],null,null)}function O(n){return l.Ib(0,[(n()(),l.pb(0,0,null,null,1,"div",[["class","secondary-button"]],null,[[null,"click"]],(function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.deleteRoom()&&l),l}),null,null)),(n()(),l.Hb(-1,null,["Delete room"]))],null,null)}function v(n){return l.Ib(0,[(n()(),l.pb(0,0,null,null,1,"div",[["class","secondary-button"]],null,[[null,"click"]],(function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.exitRoom()&&l),l}),null,null)),(n()(),l.Hb(-1,null,["Exit room"]))],null,null)}function x(n){return l.Ib(0,[(n()(),l.pb(0,0,null,null,30,"ion-content",[],null,null,null,a.z,a.f)),l.ob(1,49152,null,0,i.t,[l.h,l.k,l.x],null,null),(n()(),l.pb(2,0,null,0,28,"div",[["class","lobby"]],null,null,null,null,null)),(n()(),l.pb(3,0,null,null,5,"div",[["class","header-container"]],null,null,null,null,null)),(n()(),l.pb(4,0,null,null,4,"div",[["class","code-container"]],null,null,null,null,null)),(n()(),l.pb(5,0,null,null,1,"div",[["class","sup-code"]],null,null,null,null,null)),(n()(),l.Hb(-1,null,[" Join the game with room code : "])),(n()(),l.pb(7,0,null,null,1,"div",[["class","code"]],null,null,null,null,null)),(n()(),l.Hb(8,null,["",""])),(n()(),l.pb(9,0,null,null,14,"div",[["class","main-lobby"]],null,null,null,null,null)),(n()(),l.pb(10,0,null,null,6,"div",[["class","players-section"]],null,null,null,null,null)),(n()(),l.pb(11,0,null,null,1,"div",[["class","players-title"]],null,null,null,null,null)),(n()(),l.Hb(-1,null,["Players"])),(n()(),l.pb(13,0,null,null,3,"div",[["class","players-simplebar"],["data-simplebar",""]],null,null,null,null,null)),(n()(),l.pb(14,0,null,null,2,"div",[["class","players"]],null,null,null,null,null)),(n()(),l.eb(16777216,null,null,1,null,C)),l.ob(16,278528,null,0,c.i,[l.M,l.J,l.q],{ngForOf:[0,"ngForOf"]},null),(n()(),l.pb(17,0,null,null,6,"div",[["class","packs-section"]],null,null,null,null,null)),(n()(),l.pb(18,0,null,null,1,"div",[["class","packs-title"]],null,null,null,null,null)),(n()(),l.Hb(-1,null,["Game's themes"])),(n()(),l.pb(20,0,null,null,3,"div",[["class","packs-simplebar"],["data-simplebar",""]],null,null,null,null,null)),(n()(),l.pb(21,0,null,null,2,"div",[["class","packs"]],null,null,null,null,null)),(n()(),l.eb(16777216,null,null,1,null,M)),l.ob(23,278528,null,0,c.i,[l.M,l.J,l.q],{ngForOf:[0,"ngForOf"]},null),(n()(),l.pb(24,0,null,null,6,"div",[["class","toolbar-section"]],null,null,null,null,null)),(n()(),l.eb(16777216,null,null,1,null,P)),l.ob(26,16384,null,0,c.j,[l.M,l.J],{ngIf:[0,"ngIf"]},null),(n()(),l.eb(16777216,null,null,1,null,O)),l.ob(28,16384,null,0,c.j,[l.M,l.J],{ngIf:[0,"ngIf"]},null),(n()(),l.eb(16777216,null,null,1,null,v)),l.ob(30,16384,null,0,c.j,[l.M,l.J],{ngIf:[0,"ngIf"]},null)],(function(n,t){var e=t.component;n(t,16,0,e.players),n(t,23,0,e.room.packs),n(t,26,0,e.owner&&e.players.length>=1),n(t,28,0,e.owner),n(t,30,0,!e.owner)}),(function(n,t){n(t,8,0,t.component.roomCode)}))}function k(n){return l.Ib(0,[(n()(),l.eb(16777216,null,null,1,null,x)),l.ob(1,16384,null,0,c.j,[l.M,l.J],{ngIf:[0,"ngIf"]},null)],(function(n,t){n(t,1,0,null!=t.component.room)}),null)}var w=l.lb("app-lobby",h,(function(n){return l.Ib(0,[(n()(),l.pb(0,0,null,null,1,"app-lobby",[],null,null,null,k,y)),l.ob(1,114688,null,0,h,[g.a,p.a,d.a,s.c,s.b,f.m,f.a,i.a,i.Jb,_.a],null,null)],(function(n,t){n(t,1,0)}),null)}),{},{},[]),I=e("s7LF"),R=function n(){_classCallCheck(this,n)};e.d(t,"LobbyPageModuleNgFactory",(function(){return S}));var S=l.mb(o,[],(function(n){return l.yb([l.zb(512,l.j,l.X,[[8,[r.a,w]],[3,l.j],l.v]),l.zb(4608,c.l,c.k,[l.s,[2,c.w]]),l.zb(4608,I.t,I.t,[]),l.zb(4608,i.b,i.b,[l.x,l.g]),l.zb(4608,i.Cb,i.Cb,[i.b,l.j,l.p]),l.zb(4608,i.Fb,i.Fb,[i.b,l.j,l.p]),l.zb(1073742336,c.b,c.b,[]),l.zb(1073742336,I.s,I.s,[]),l.zb(1073742336,I.i,I.i,[]),l.zb(1073742336,i.Ab,i.Ab,[]),l.zb(1073742336,f.o,f.o,[[2,f.t],[2,f.m]]),l.zb(1073742336,R,R,[]),l.zb(1073742336,o,o,[]),l.zb(1024,f.k,(function(){return[[{path:"",component:h}]]}),[])])}))}}]);